
<!DOCTYPE html>

<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Open Street Map - Skapa vägkartor 1 &#8212; Geografi</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://opendata-education.github.io/se_Geografi/intro.html/ovningar/openstreetmap.html" />
    <link rel="shortcut icon" href="../_static/logo.png"/>
    <link rel="index" title="Sisällysluettelo" href="../genindex.html" />
    <link rel="search" title="Etsi" href="../search.html" />
    <link rel="prev" title="1854 - John Snow och koleran" href="Koleraepidemin_1854.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="fi">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Geografi</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Välkommen att använda Open Data
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="ovningar.html">
   ÖVNINGAR
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro_1_jupyter_python.html">
     Intro 1: Använd Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="intro_2_statistik_i_python.html">
     Intro 2: Statistik i Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="varldskarta.html">
     Att presentera data på en karta
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="interaktiv_karta.html">
     Interaktiva kartor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Koleraepidemin_1854.html">
     1854 - John Snow och koleran
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Open Street Map - Skapa vägkartor 1
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/opendata-education/se_Geografi/main?urlpath=tree/material/ovningar/openstreetmap.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/opendata-education/se_Geografi"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/opendata-education/se_Geografi/issues/new?title=Issue%20on%20page%20%2Fovningar/openstreetmap.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/ovningar/openstreetmap.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Open Street Map - Skapa vägkartor 1</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="open-street-map-skapa-vagkartor-1">
<h1>Open Street Map - Skapa vägkartor 1<a class="headerlink" href="#open-street-map-skapa-vagkartor-1" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://www.openstreetmap.org/">Open Street Map</a> (OSM) är en öppen kartservice, som användaren själv kan skapa kartor ifrån. Eftersom OSM är ett öppet projekt kan innehållet användas fritt både för privat och kommersiellt bruk. Med hjälp av python kan vi använda OSM genom funktionspaketet <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/index.html">osmnx</a>. Från OSM kan man få positionsinformation för vägnät, byggnader, parker, restauranger, etc.</p>
<p>I denna övning bekantar vi oss med osmnx-paketet, vi hämtar in platsinformation för vägnätet inom en radie från Vasa centrum (torget), och ritar in vägnätet på en karta. Vi behöver också funktionspaketet <a class="reference external" href="https://matplotlib.org/">matplotlib</a> för att skapa grafer/kartor.</p>
<p>Om du ska köra dena Notebook lokalt på din dator, behöver du ha <strong>osmnx</strong> och <strong>matplotlib</strong> tillgängliga. Matplotlib ingår redan om du har installerat Anaconda, men osmnx behöver installeras.</p>
<p>Öppna <strong>Anaconda prompt</strong> och skriv in <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">osmnx</span></code>.
När du har installerat funktionspaketet kan du köra cellen nedan.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>  <span class="c1"># osmnx låter oss hämta kartdata</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># matplotlib låter oss rita diagram, och i detta fall, kartor.</span>
</pre></div>
</div>
</div>
</div>
<p>Vi bestämmer en adress som vi vill utgå ifrån. Vi bestämmer också ett avstånd.</p>
<p>Vi undersöker vägnätet inom en halv kilometer från Vasa torg.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vi bestämmer adress och avstånd, och sparar värdena som variabler &quot;address&quot; och &quot;distance&quot;</span>

<span class="n">address</span> <span class="o">=</span> <span class="s2">&quot;Ylätori, 65100, Vaasa, Finland&quot;</span>
<span class="n">distance</span> <span class="o">=</span> <span class="mi">500</span>     <span class="c1"># enheten är meter</span>
</pre></div>
</div>
</div>
</div>
<p>Nu kan vi hämta informationen som behövs med funktionen <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.graph.graph_from_address"><code class="docutils literal notranslate"><span class="pre">ox.graph_from_address()</span></code></a>. När vi har hämtat infromationen kan vi rita kartan med <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.plot.plot_graph"><code class="docutils literal notranslate"><span class="pre">ox.plot_graph()</span></code></a>-funktionen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vi hämtar in vägdata genom att ange adress och avstånd.</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_address</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">distance</span><span class="p">)</span>

<span class="c1"># Vi ritar ut vägnätet</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/openstreetmap_5_0.png" src="../_images/openstreetmap_5_0.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&lt;Figure size 576x576 with 1 Axes&gt;, &lt;AxesSubplot:&gt;)
</pre></div>
</div>
</div>
</div>
<p>Sådär, nu ser vi Vasa vägnät, och allt som behövdes var 5 rader kod. Det hade gått med mindre, men det är lättare att förstå vad som händer om man spjälker upp koden lite, och vi kommer att använda variablerna <em>address</em> och <em>distance</em> i senare celler också.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dessa två rader hade gjort allt som behövs för bilden. Du kan copy-pasta dem i en kodcell om du vill testa.</span>
<span class="kn">import</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">ox</span><span class="o">.</span><span class="n">graph_from_address</span><span class="p">(</span><span class="s2">&quot;Ylätori, 65100, Vaasa, Finland&quot;</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="mi">500</span><span class="p">))</span>
</pre></div>
</div>
<p>Känner du till Vasa? Ser du vilket kvarter som är Torget? Hittar du Kyrkparken och Trefaldighetskyrkan?
Eller kanske Vasa är obekant och ointressant för dig? Du kan när som helst gå tillbaka och ändra adressen om du vill visa något annat område på kartan.</p>
<p>Nu ska vi förtydliga kartan. Kartan ovan visar bilvägar och gångvägar, men vi vill göra den klarare genom att också markera byggnader. Först kan vi skapa variablerna <code class="docutils literal notranslate"><span class="pre">nodes,</span> <span class="pre">edges</span></code> som innehåller korsningar och gator med kommandot <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.utils_graph.graph_to_gdfs"><code class="docutils literal notranslate"><span class="pre">ox.graph_to_gdfs()</span></code></a></p>
<p>Vi kan också läsa in alla byggnader med funktionen <a class="reference external" href="https://osmnx.readthedocs.io/en/stable/osmnx.html#osmnx.geometries.geometries_from_address"><code class="docutils literal notranslate"><span class="pre">ox.geometries_from_address</span></code></a>. Denna funktion kan ge oss mycket annat än byggnader, och därför behövs parametern <code class="docutils literal notranslate"><span class="pre">tags</span> <span class="pre">=</span> <span class="pre">{'building':</span> <span class="pre">True}</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Från den tidigare bilden skiljer vi ut korsningar (nodes) och gator (edges)</span>
<span class="n">nodes</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_to_gdfs</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="c1"># Vi söker fram byggnaderna i området genom att igen ange adress och avstånd, samt parametern tags = &quot;building&quot;: True</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geometries_from_address</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> <span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;building&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span> <span class="p">)</span>

<span class="c1"># Byggnaderna finns i en tabell, och vi kan se tabellens kolumnrubriker här, så vet vi ungefär vad den innehåller.</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;geometry&#39;, &#39;amenity&#39;, &#39;source&#39;, &#39;fee&#39;, &#39;name&#39;, &#39;operator&#39;, &#39;parking&#39;,
       &#39;wheelchair&#39;, &#39;service:bicycle:repair&#39;, &#39;service:bicycle:retail&#39;,
       &#39;shop&#39;, &#39;office&#39;, &#39;cuisine&#39;, &#39;opening_hours&#39;, &#39;outdoor_seating&#39;,
       &#39;smoking&#39;, &#39;website&#39;, &#39;nodes&#39;, &#39;addr:city&#39;, &#39;addr:postcode&#39;,
       &#39;addr:street&#39;, &#39;building&#39;, &#39;building:colour&#39;, &#39;building:levels&#39;,
       &#39;name:en&#39;, &#39;name:fi&#39;, &#39;name:sv&#39;, &#39;addr:housenumber&#39;, &#39;alt_name&#39;,
       &#39;public_transport&#39;, &#39;roof:shape&#39;, &#39;description&#39;, &#39;height&#39;, &#39;man_made&#39;,
       &#39;tourism&#39;, &#39;layer&#39;, &#39;note&#39;, &#39;email&#39;, &#39;internet_access&#39;, &#39;phone&#39;,
       &#39;addr:housename&#39;, &#39;roof:colour&#39;, &#39;alt_name:fi&#39;, &#39;alt_name:sv&#39;,
       &#39;service:bicycle:rental&#39;, &#39;service:bicycle:second_hand&#39;, &#39;denomination&#39;,
       &#39;religion&#39;, &#39;is_in&#39;, &#39;start_date&#39;, &#39;building:material&#39;, &#39;building:part&#39;,
       &#39;ways&#39;, &#39;type&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Vi märker att det finns mycket information om byggnaderna, så som namn, tillgänglighet med rullstol och öppethållningstider. Den här gången kommer vi helt enkelt att rita in alla byggnader, så vi behöver inte sålla informationen.</p>
<p>Nu kan vi rita gatorna och byggnaderna i samma bild. Då behöver vi grunda med ett <code class="docutils literal notranslate"><span class="pre">subplots</span></code>-kommando. Funktionen subplots ger ett namn för figuren (fig) och information om axlarna (ax) (<code class="docutils literal notranslate"><span class="pre">fig,</span> <span class="pre">ax</span> <span class="pre">=</span> <span class="pre">plt.subplots()</span></code>). Vi behöver ange <code class="docutils literal notranslate"><span class="pre">ax</span></code> för både vägdiagramet och byggnadsdiagramet, så att de ritas på samma karta.</p>
<p>Vi använder följande funktioner:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_facecolor.html?highlight=set_facecolor#matplotlib.axes.Axes.set_facecolor"><code class="docutils literal notranslate"><span class="pre">ax.set_facecolor()</span></code></a> -&gt; anger diagrammets bakgrundsfärg</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.title.html?highlight=title#matplotlib.pyplot.title"><code class="docutils literal notranslate"><span class="pre">plt.title()</span></code></a> -&gt; anger kartans titel</p></li>
<li><p><a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html?highlight=show#matplotlib.pyplot.show"><code class="docutils literal notranslate"><span class="pre">plt.show()</span></code></a> -&gt; gör att kartan visas utan extra onödig information om kodcellen.</p></li>
</ul>
<p>Vi behöver också välja färger som gör kartan tydlig. Färgerna som är tilgängliga i python hittar du <a class="reference external" href="https://matplotlib.org/2.0.2/examples/color/named_colors.html">här</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vi grundar diagrammet med ett subplots-kommando</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span> <span class="c1"># Här kan man justera bildstorleken.</span>

<span class="c1"># Vi väljer en neutral bakgrundsfärg</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;seashell&#39;</span><span class="p">)</span>

<span class="c1"># Vi väljer en rubrik för kartan</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gator och byggnader inom 500m från Vasa torg&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>

<span class="c1"># Vi ritar vägnätet. Vi anger axeln ax. parametern alpha gör vägarna lite genomskinliga.</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;saddlebrown&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Vi ritar byggnaderna. Vi anger igen axeln ax, så att de ritas på samma karta som vägarna.</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># Visar kartan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/openstreetmap_9_0.png" src="../_images/openstreetmap_9_0.png" />
</div>
</div>
<p>Nu har vi redan ritat vägnät och byggnader. Vi kan lägga till parker i bilden. I tabellen är de märkta med taggen ”leisure”. På den taggen hittar vi mycket annat också, så vi måste rensa informationen lite.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vi söker fram alla fritidsmärkta områden med taggen &quot;leisure&quot;: True. Vi använder samma adress och avstånd.</span>
<span class="n">leisure</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geometries_from_address</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;leisure&quot;</span><span class="p">:</span><span class="kc">True</span><span class="p">})</span>

<span class="c1"># Variabeln &quot;leisure&quot;, som vi skapat, är en tabell. Vi kontrollerar vilka kolumner den innehåller.</span>
<span class="n">leisure</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;geometry&#39;, &#39;brand&#39;, &#39;brand:wikidata&#39;, &#39;brand:wikipedia&#39;, &#39;entrance&#39;,
       &#39;leisure&#39;, &#39;name&#39;, &#39;opening_hours:covid19&#39;, &#39;sport&#39;, &#39;source&#39;, &#39;nodes&#39;,
       &#39;name:sv&#39;, &#39;surface&#39;, &#39;lit&#39;, &#39;ways&#39;, &#39;type&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>I tabellen över fritidsplatser finns en kolumn som heter ”leisure”. Vi ser vad den innehåller.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">leisure</span><span class="p">[</span><span class="s1">&#39;leisure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;fitness_centre&#39; &#39;playground&#39; &#39;park&#39; &#39;pitch&#39; &#39;marina&#39;]
</pre></div>
</div>
</div>
</div>
<p>Vi kan söka upp platser som lekparker, gym eller parker. Vi vill rita parkerna på kartan, och de hittas förstås om vi söker ordet ”park” ur tabellen. Vi skiljer ut dem ur tabellen, och sparar dem i variabeln ”parks”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vi väljer ut parkerna bland fritidsplatserna. Funktionen .isin([&quot;park&quot;]) söker upp de rader som innehåller ordet park.</span>
<span class="n">parks</span> <span class="o">=</span> <span class="n">leisure</span><span class="p">[</span><span class="n">leisure</span><span class="p">[</span><span class="s2">&quot;leisure&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;park&quot;</span><span class="p">])]</span>
</pre></div>
</div>
</div>
</div>
<p>Nu kan vi rita kartan, inklusive parkerna, på samma sätt som tidigare.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;seashell&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gator, byggnader och parker inom 500m från Vasa torg&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>

<span class="c1"># Vi lägger till parkerna i samma teckning</span>
<span class="n">parks</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Vi upprepar samma kod som tidigare för att få in vägar och byggnader</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;saddlebrown&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span> 


<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/openstreetmap_17_0.png" src="../_images/openstreetmap_17_0.png" />
</div>
</div>
<p>Vi märker att grönområderna går lite utanför den avståndsbegränsning som vi valde i början, och det har gjort kartan lite mindre. Vi kan välja gränser för diagrammet, så att skalan blir samma som tidigare. Vi kan använda <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xlim.html?highlight=xlim#matplotlib.pyplot.xlim"><code class="docutils literal notranslate"><span class="pre">plt.xlim()</span></code></a> och <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.ylim.html?highlight=ylim#matplotlib.pyplot.ylim"><code class="docutils literal notranslate"><span class="pre">plt.ylim()</span></code></a> för att begränsa kartan. Vi kan se vilka gränser som passar genom att läsa av värdena på kartornas axlar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;seashell&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gator, byggnader och parker inom 500m från Vasa torg&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>

<span class="n">parks</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">edges</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;saddlebrown&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span> 

<span class="c1"># Vi väljer gränser för bilden. De angivna siffrorna är latitud och longitud.</span>
<span class="c1"># Se på föregående karta för att hitta passande gränser.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mf">21.604</span><span class="p">,</span> <span class="mf">21.627</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mf">63.090</span><span class="p">,</span> <span class="mf">63.1005</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/openstreetmap_19_0.png" src="../_images/openstreetmap_19_0.png" />
</div>
</div>
<p>Nu är kartan klar. Med den kan vi undersöka vägnätet i Vasa centrum, och vi kan lätt göra samma sak för ett annat område om vi bara ändrar variablerna <strong>address</strong> och <strong>distance</strong> i början, samt gränserna <strong>ylim()</strong> och <strong>xlim()</strong> i den sista kodcellen.</p>
<p>Testa själv att göra en likadan karta över något annat område, eller berika den här kartan med fler markeringar!</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ovningar"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Koleraepidemin_1854.html" title="< page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle"><</p>
            <p class="prev-next-title">1854 - John Snow och koleran</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By HIP Education and Open Data Team<br/>
  
    <div class="extra_footer">
      <div>
<a>Toteutettu Opetushallituksen valtionavustuksella tiedekasvatuksen edistämiseen.</a></br><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> Tämän sivuston materiaali on käytettävissä seuraavalla lisenssillä: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY 4.0.</a>
</div>    

    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>